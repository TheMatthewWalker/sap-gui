<?xml version="1.0" encoding="utf-8"?>
<Page x:Class="sap_gui.Pages.StockPage" 
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
      xmlns:local="using:sap_gui" 
      xmlns:toolkit="using:CommunityToolkit.WinUI.UI.Controls" 
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    
    <Grid RowDefinitions="Auto,*" Padding="24">
        
        <!-- HEADER -->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="12">
            <Button Content="â† Back" Click="Back_Click" Style="{StaticResource AccentButtonStyle}" Width="80" />
            <TextBlock Text="Inventory" FontSize="28" FontWeight="SemiBold" VerticalAlignment="Center"/>
        </StackPanel>
        
        <!-- MAIN CONTENT -->
        <ScrollViewer Grid.Row="1">
            <StackPanel Spacing="20" Padding="8">
                
                <!-- CARD: Selected Item Details -->
                <Border Background="White" CornerRadius="12" Padding="16" BorderBrush="#FFCCCCCC" BorderThickness="1">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Search Criteria" FontSize="20" FontWeight="SemiBold"/>
                        
                        <!-- Material + Batch + Storage Location -->
                        <Grid ColumnSpacing="12">
                            
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Material" FontWeight="SemiBold"/>
                                <TextBox Text="{Binding MATNR}" x:Name="MATNR"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Batch" FontWeight="SemiBold"/>
                                <TextBox Text="{Binding CHARG}" x:Name="CHARG"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Bin" FontWeight="SemiBold"/>
                                <TextBox Text="{Binding LGPLA}" x:Name="LGPLA"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="3">
                                <TextBlock Text="Bin Type" FontWeight="SemiBold"/>
                                <TextBox Text="{Binding LGTYP}" x:Name="LGTYP"/>
                            </StackPanel>
                            
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- CREATE BUTTON -->
                <Button Content="Search Inventory" Click="Read_Table_Click" Height="48" Style="{StaticResource AccentButtonStyle}" HorizontalAlignment="Stretch" FontSize="18"/>
                
                <TextBlock x:Name="StatusText" Text="" Margin="0,10,0,0"/>
                
                <!-- SAP RESULT MESSAGE -->
                <Border Background="#FFF5F5F5" CornerRadius="8" Padding="12" BorderBrush="#FFCCCCCC" BorderThickness="1">
                    <toolkit:DataGrid x:Name="SapDataGrid" 
                                      AutoGenerateColumns="True" 
                                      HeadersVisibility="Column" 
                                      IsReadOnly="True" 
                                      GridLinesVisibility="Horizontal" 
                                      CanUserSortColumns="True" 
                                      Height="400" 
                                      RightTapped="SapDataGrid_RightTapped">

                        <toolkit:DataGrid.ContextFlyout>
                            <MenuFlyout>
                                <MenuFlyoutItem Text="Create Warehouse Movement" Icon="Forward" Click="CreateMovement_Click"/>
                                <MenuFlyoutItem Text="View Material History" Icon="View" Click="ViewHistory_Click"/>
                            </MenuFlyout>
                        </toolkit:DataGrid.ContextFlyout>
                        
                    </toolkit:DataGrid>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>